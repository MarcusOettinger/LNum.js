function LNum(F,C,t){var G=50;var E=1;var r=100;var x=10;var z=0;var n=1;var c=10;var l=3;var m=t;var j=m.getContext("2d");var H=1;var q={clear:false,line:false,tickSpacing:0,fontSize:"14px",fontFamily:"sans-serif",ticklen:10,color:"#888",linewidth:1,startArrow:false,endArrow:false,arrowAngle:45,arrowRadius:10};F==C?C=F+10:C;z=s(F,C);n=w(F,C);function B(){for(var b=1;b<arguments.length;b++){for(var a in arguments[b]){if(arguments[b].hasOwnProperty(a)){arguments[0][a]=arguments[b][a]}}}return arguments[0]}function g(a){return c*a}function e(a){return r+g(a)}function k(a){return x}function D(a){return typeof a==="number"?a?a<0?-1:1:a===a?0:NaN:NaN}function s(J,I){if(I<J){return I}return J}function w(J,I){if(I>J){return I}return J}function A(a,I){var b=a.length-I.length;return b>=0&&a.indexOf(I,b)>-1}function u(a,I){var b=I.fontSize;if(A(b,"px")==false){while(isNaN(b)&&b.length>1){b=b.substring(0,b.length-1)}b=b+"px"}a.font=b+" "+I.fontFamily}function h(a){E=n-z;c=(m.width-2*G)/E;r=G-(c*s(F,C));x=m.height/2+G;if(a.tickSpacing==0){while(E/H>10){H=H+1}}else{H=a.tickSpacing}}function d(P,X,T,J,S,I){var R,Q,M,L,W,V,K=Math.atan2,O=Math.PI,Y=Math.round,N=Math.abs,a=Math.sin,b=Math.cos,U;if(X.arrowRadius){U=K((I-J),(S-T));U-=O;W=(X.linewidth*b(U));V=(X.linewidth*a(U));R=S-(X.arrowRadius*b(U+(X.arrowAngle/2)));Q=I+(X.arrowRadius*a(U+(X.arrowAngle/2)));M=S-(X.arrowRadius*b(U-(X.arrowAngle/2)));L=I+(X.arrowRadius*a(U-(X.arrowAngle/2)));P.moveTo(R-W,Q-V);P.lineTo(S-W,I-V);P.lineTo(M-W,L-V);P.moveTo(S-W,I-V);P.lineTo(S+W,I+V);P.moveTo(S,I)}}function v(I,a){if(j==null){return}var b=B({},I,a);j.strokeStyle=b.color;j.strokeWidth=b.linewidth;j.beginPath();j.moveTo(b.x1,b.y1);j.lineTo(b.x2,b.y2);if(b.endArrow){d(j,b,b.x1,b.y1,b.x2,b.y2)}if(b.startArrow){d(j,b,b.x2,b.y2,b.x1,b.y1)}j.stroke()}function y(I,a){if(j==null){return}var b=B({},I,a);j.beginPath();j.strokeStyle=b.color;j.strokeWidth=b.linewidth;j.fillStyle=b.color;u(j,b);j.textAlign="center";j.textBaseline="middle";j.fillText(b.text,b.x,b.y)}function f(I,a){if(j==null){return}var b=B({},I,a);j.beginPath();j.strokeStyle=b.color;j.strokeWidth=b.linewidth;j.rect(b.x,b.y,b.width,b.height);j.stroke()}function p(I,a){var b=B({},q,a);v(b,{endArrow:false,x1:e(I),y1:x,x2:e(I),y2:x+l});y(b,{x:e(I),y:x+15,text:I})}function o(a){if(m==null||j==null){return}var b=B({},q,a);v(b,{endArrow:false,x1:G,y1:x,x2:G+E*c,y2:x});for(i=z;i<=n;i+=H){p(i,b)}}this.setCanvas=function(a){m=a;j=a.getContext("2d")};this.getCanvasImage=function(a){if(m.toDataURL){quality=1;dataURL=m.toDataURL("image/"+a,quality)}else{console.log("No toDataURL? Bummer!")}return dataURL};this.drawQ=function(L,N,b){if(N==0){alert("n in q=z/n must not be zero!");return}var J=B({},q,b);var M=e(L/N);var K=x-J.ticklen;y(J,{x:M,y:K-13,text:N});var I=parseInt(j.font.match(/\d+/),10);var a=j.measureText(N).width;v(J,{endArrow:false,x1:M,y1:x,x2:M,y2:K});v(J,{endArrow:false,x1:M-a/2,y1:K-I-8,x2:M+a/2,y2:K-I-8});y(J,{x:M,y:K-I-16,text:L})};this.drawN=function(I,a){var b=B({},q,a);v(b,{endArrow:false,x1:e(I),y1:x,x2:e(I),y2:x-b.ticklen});y(b,{x:e(I),y:x-b.ticklen-10,text:I})};this.drawSum=function(N,b,I){var L=N+b;var M=D(b)*4;if(b>0){step="+"+b.toString()}else{step=b.toString()}var K=B({},q,{ticklen:35},I);v(K,{x1:e(N),y1:x,x2:e(N),y2:x-K.ticklen});v(K,{x1:e(L),y1:x,x2:e(L),y2:x-K.ticklen});v(K,{endArrow:true,arrowRadius:10,arrowAngle:45,x1:e(N)+M,y1:x-K.ticklen-5,x2:e(L)-M,y2:x-K.ticklen-5});y(K,{x:e(N),y:x-K.ticklen-15,text:N});y(K,{x:e(N+b/2),y:x-K.ticklen-15,text:step});y(K,{x:e(L),y:x-K.ticklen-15,text:L});var a=j.measureText(step).width+6;var J=parseInt(j.font.match(/\d+/),10);f(K,{x:e(N+b/2)-a/2,y:x-K.ticklen-6,width:a,height:-(J+6)})};this.display=function(a){var b=B({},q,{clear:true,line:true},a);h(b);if(b.clear){j.clearRect(0,0,m.width,m.height);_count=0}if(b.line){o(b)}};return this};