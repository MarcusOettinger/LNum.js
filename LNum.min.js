function LNum(x,u,p){var y=50;var w=1;var n=100;var r=10;var t=0;var k=1;var c=10;var g=3;var j=p;var z=1;var m={clear:false,line:false,tickSpacing:0,fontSize:14,fontFamily:"sans-serif",ticklen:"10",color:"#888"};x==u?u=x+10:u;t=o(x,u);k=q(x,u);function e(a){return c*a}function d(a){return n+e(a)}function h(a){return r}function v(a){return typeof a==="number"?a?a<0?-1:1:a===a?0:NaN:NaN}function o(B,A){if(A<B){return A}return B}function q(B,A){if(A>B){return A}return B}function f(a){w=k-t;c=(j.width()-2*y)/w;n=y-(c*o(x,u));r=j.height()/2+y;if(a.tickSpacing==0){while(w/z>10){z=z+1}}else{z=a.tickSpacing}}function s(b,a){j.drawLine({strokeStyle:a.color,strokeWidth:2,rounded:false,endArrow:false,x1:d(b),y1:r,x2:d(b),y2:r+g});j.drawText({strokeStyle:a.color,strokeWidth:1,x:d(b),y:r+10,fontSize:a.fontSize,fontFamily:a.fontFamily,text:b})}function l(a){if(j==null){return}var b=$.extend({},m,a);j.drawLine({strokeStyle:b.color,strokeWidth:2,rounded:false,endArrow:false,x1:y,y1:r,x2:y+w*c,y2:r});for(i=t;i<=k;i+=z){s(i,b)}}this.setCanvas=function(a){j=a};this.getCanvasImage=function(a){return j.getCanvasImage(a)};this.drawQ=function(D,F,b){if(F==0){alert("n in q=z/n must not be zero!");return}var B=$.extend({},m,b);var E=d(D/F);var C=r-B.ticklen;j.drawText({strokeStyle:B.color,fillStyle:B.color,strokeWidth:1,x:E,y:C-13,fontSize:B.fontSize,fromCenter:true,fontFamily:B.fontFamily,layer:true,name:"nn",text:F});var A=j.measureText("nn").height;var a=j.measureText("nn").width;j.drawLine({strokeStyle:B.color,strokeWidth:2,rounded:false,endArrow:false,x1:E,y1:r,x2:E,y2:C});j.drawLine({strokeStyle:B.color,strokeWidth:2,rounded:false,endArrow:false,x1:E-a/2,y1:C-A-8,x2:E+a/2,y2:C-A-8});j.drawText({strokeStyle:B.color,fillStyle:B.color,strokeWidth:1,x:E,y:C-A-16,fontSize:B.fontSize,fontFamily:B.fontFamily,text:D})};this.drawN=function(A,a){var b=$.extend({},m,a);j.drawLine({strokeStyle:b.color,strokeWidth:2,rounded:false,endArrow:false,x1:d(A),y1:r,x2:d(A),y2:r-b.ticklen});j.drawText({strokeStyle:b.color,fillStyle:b.color,strokeWidth:1,x:d(A),y:r-b.ticklen-10,fontSize:b.fontSize,fontFamily:b.fontFamily,text:A})};this.drawSum=function(D,a,b){var B=D+a;var C=v(a)*4;if(a>0){step="+"+a.toString()}else{step=a.toString()}var A=$.extend(m,{ticklen:35},b);j.drawLine({strokeStyle:A.color,strokeWidth:1,rounded:false,endArrow:false,x1:d(D),y1:r,x2:d(D),y2:r-A.ticklen});j.drawLine({strokeStyle:A.color,strokeWidth:1,rounded:false,endArrow:false,x1:d(B),y1:r,x2:d(B),y2:r-A.ticklen});j.drawLine({strokeStyle:A.color,strokeWidth:2,rounded:false,endArrow:true,arrowRadius:10,arrowAngle:45,x1:d(D)+C,y1:r-A.ticklen-5,x2:d(B)-C,y2:r-A.ticklen-5});j.drawText({strokeStyle:A.color,fillStyle:A.color,strokeWidth:1,x:d(D),y:r-A.ticklen-15,fontSize:A.fontSize,fontFamily:A.fontFamily,text:D});j.drawText({strokeStyle:A.color,fillStyle:A.color,strokeWidth:1,x:d(D+a/2),y:r-A.ticklen-15,fontSize:A.fontSize,fontFamily:A.fontFamily,layer:true,name:"myStep",text:step});j.drawText({strokeStyle:A.color,fillStyle:A.color,strokeWidth:1,x:d(B),y:r-A.ticklen-15,fontSize:A.fontSize,fontFamily:A.fontFamily,text:B});j.drawRect({strokeStyle:A.color,x:d(D+a/2),y:r-A.ticklen-15,width:j.measureText("myStep").width+6,height:j.measureText("myStep").height+6})};this.display=function(a){var b=$.extend({},m,{clear:true,line:true},a);f(b);if(b.clear){j.clearCanvas();_count=0}if(b.line){l(b)}};return this};